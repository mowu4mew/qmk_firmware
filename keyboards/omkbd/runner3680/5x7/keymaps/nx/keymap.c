#include QMK_KEYBOARD_H
#include "keymap_japanese.h"

/*
#ifdef PROTOCOL_LUFA
  #include "lufa.h"
  #include "split_util.h"
#endif

extern keymap_config_t keymap_config;
*/


// Layer
enum layer_number {
  _NUM = 0, //Default Layer For NUM
  _CMD,			//Layer For CMD
  _SLCT     //Layer For Select
};


//Special KeyCode
enum custom_keycodes {
  NUM = SAFE_RANGE, //Change Layer for NUM
  CMD,              //Change Layer for Command
  SLCT              //Change Layer for Select
};

//Override
const key_override_t unds_key_override = ko_make_basic(MOD_MASK_SHIFT,KC_MINS, JP_UNDS); //_

const key_override_t **key_overrides = (const key_override_t *[]){
  &unds_key_override,
  NULL
};

//Alias
#define MT_SE LT(_SLCT,KC_ESC)    //hold:"SLCT"   tap:"ESC"
#define MT_CE LT(_CMD,KC_ENTER)   //hold:"CMD"    tap:"ENTER"
#define MC_DTR LGUI(C(KC_RIGHT))  //Desk top move right
#define MC_DTL LGUI(C(KC_LEFT))   //Desk top move left

//Keymap
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_NUM] = LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
           KC_P,   KC_F5,   KC_F8,  KC_TAB,  KC_DEL, S(KC_8), KC_BSPC,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
           KC_X,    KC_7,    KC_8,    KC_9, KC_SLSH, S(KC_9),   KC_UP,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        C(KC_Y),    KC_4,    KC_5,    KC_6, KC_PAST, KC_LEFT,KC_RIGHT,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        C(KC_Z),    KC_1,    KC_2,    KC_3, KC_MINS, KC_LCTL, KC_DOWN,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
          MT_SE,    KC_0,S(KC_MINS),KC_DOT, KC_PPLS, KC_LSFT,   MT_CE,     _______, _______, _______, _______, _______, _______, _______
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
      ),

  [_CMD] =  LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
     S(KC_F3),S(KC_F9),LCA(KC_F2),C(KC_F12),A(KC_F9),RCS(KC_F3),RCS(KC_F9),    _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
  S(KC_F4),S(KC_F10),LCA(KC_F12),A(KC_F1),A(KC_F10),RCS(KC_F4),RCS(KC_F10),   _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
  S(KC_F5),S(KC_F11),C(KC_F9),A(KC_F2),A(KC_F12),RCS(KC_F5),RCS(KC_F11),    _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
  S(KC_F6),S(KC_F12),C(KC_F10),A(KC_F3),RCS(KC_F1),RCS(KC_F6),RCS(KC_F12),   _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
  S(KC_F7),C(KC_F5),C(KC_F11),RCS(KC_F8),RCS(KC_F2),RCS(KC_F7), _______,    _______, _______, _______, _______, _______, _______, _______
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
      ),

  [_SLCT] = LAYOUT( \
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
        _______, _______, _______, _______, _______, _______, _______,     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
  _______,LCA(KC_F2),LCA(KC_F3),LCA(KC_F4),LCA(KC_F5),LCA(KC_F6),C(KC_F6),     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______,    KC_C,    KC_F,    KC_B,    KC_G,    KC_E,C(KC_F4),     _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, C(KC_X), C(KC_C), C(KC_V),C(KC_M),LCA(KC_N),RCS(KC_D),    _______, _______, _______, _______, _______, _______, _______,
    //|--------+--------+--------+--------+--------+--------+--------|   |--------+--------+--------+--------+--------+--------+--------|
        _______, C(KC_A), JP_MHEN, JP_HENK,    KC_Y,    KC_N, C(KC_S),     _______, _______, _______, _______, _______, _______, _______
    //,--------------------------------------------------------------|   |---------------------------------------------------------------.
  )
};
